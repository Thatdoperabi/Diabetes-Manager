<UserInputScreen>:
    ScrollView:
        do_scroll_x: False
        do_scroll_y: True
        BoxLayout:
            orientation: 'vertical'
            padding: dp(20)
            spacing: dp(30)
            size_hint_y: None
            height: dp(420)

            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: dp(48)
                pos_hint: {'top': 1}

                MDLabel:
                    text: "Time:"
                    size_hint_x: 0.2
                    halign: 'left'
                    valign: 'center'

                MDTextField:
                    mode: "filled"
                    hint_text: "Enter your name"
                    id: sugar_time
                    text: app.current_time
                    halign: 'right'
                    size_hint_x: 0.4

            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: dp(24)

                MDSegmentedButton:
                    id: meal_toggle
                    size_hint_x: 0.5
                    MDBoxLayout:
                        orientation: 'horizontal'
                        padding: [dp(5), 0]
                    MDSegmentedButtonItem:
                        size_hint_x: None
                        width: dp(130)
                        on_release: app.update_fasting_state(self, 'Post-meal')
                        MDSegmentButtonLabel:
                            text: "Post-meal"
                            font_size: '12sp'
                    MDSegmentedButtonItem:
                        size_hint_x: None
                        width: dp(130)
                        on_release: app.update_fasting_state(self, 'Fasting')
                        MDSegmentButtonLabel:
                            text: "Fasting"
                            font_size: '12sp'

            BoxLayout:
                orientation: 'vertical'
                spacing: dp(30)
                padding: (0, 70, 0, 0)

                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: None
                    height: dp(48)

                    MDLabel:
                        text: "Blood Sugar:"
                        size_hint_x: 0.3
                        halign: 'left'
                        valign: 'center'

                    MDIcon:
                        padding: (0, 0, 20, 0)
                        id: sugar_level_indicator
                        icon: "circle"
                        size: dp(24), dp(24)
                        pos_hint: {"center_x": 0.5, "center_y": 0.5}
                        theme_icon_color: "Custom"
                        color: app.icon_color
                    MDTextField:
                        id: blood_sugar_input
                        mode: "filled"
                        hint_text: "Enter blood sugar level"
                        halign: 'right'
                        size_hint_x: 0.12
                        on_text: app.update_sugar_level_indicator(self.text)

            BoxLayout:
                orientation: 'vertical'
                spacing: dp(30)
                padding: (0, 70, 0, 0)

                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: None
                    height: dp(48)

                    MDLabel:
                        text: "Carbs:"
                        size_hint_x: 0.3
                        halign: 'left'
                        valign: 'center'

                    MDTextField:
                        mode: "filled"
                        id: carbs
                        halign: 'right'
                        size_hint_x: 0.12

            BoxLayout:
                orientation: 'vertical'
                spacing: dp(30)
                padding: (0, 70, 0, 0)

                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: None
                    height: dp(48)

                    MDLabel:
                        text: "Meal Description:"
                        size_hint_x: 0.2
                        halign: 'left'
                        valign: 'center'

                    MDTextField:
                        mode: "filled"
                        id: meal_description
                        halign: 'right'
                        size_hint_x: 0.4

            MDButton:
                height: dp(48)
                pos_hint: {'center_x': .5}
                style: "elevated"
                theme_shadow_color: "Custom"
                shadow_color: "purple"
                on_release: app.save_user_data()

                MDButtonText:
                    text: "Save"
                    theme_text_color: "Custom"
                    text_color: "purple"
